# 本格视界

## 使用方案

* **前端运行方式**：在前端根文件夹下通过 `npm run serve` 指令编译代码，默认在本机的 `8080` 端口运行
* **后端运行方式**：运行后端的启动类 `BengeBackendApplication`，默认端口为 `7122`
* **Redis 锁启动方式**：安装 `Redis-x64-3.2.100`，使用默认的端口 `6379`
* **y-websocket启动方式** 使用`node .\start-y-websocket.js`命令运行y-websocket（在1234端口），第三阶段的同步编辑功能才能正常运行
> 💡 **注意点1**： 如果需要本地模拟多人协作功能，可以使用后端的ngrok配置，在一个人暴露SpringBoot的7122端口，在另外一个人使用ngrok暴露1234端口，然后将前端代码中的config配置文件的后端地址更换成SpringBoot地址，然后socket.js文件的websocket地址也更换，CompleteScriptStage.vue文件的y-websocket地址也要更换，就能正常模拟协作了

> 💡 **注意点2**：只有正确配置 Redis 环境，才能运行后端
> 如果需要在本机开启**多人协作模式**，Redis 为必需依赖


## 项目背景

随着数字内容创作的普及，剧本创作成为了许多创作者的需求。然而，传统剧本创作过程中，创作者常常面临：

* 灵感枯竭
* 结构混乱
* 缺乏视觉辅助

与此同时，AI 技术的发展为创意内容生成提供了新的可能性，软件设计中的抽象思想也拓宽了解决路径。

**本项目旨在结合 AI 技术与交互式界面，通过抽象思想逐步精化，自顶向下、有条理且逻辑清晰地拆解剧本创作流程，为创作者提供一站式创作平台：**

> 从构思 → 搭建剧本框架 → 生成完整剧本 → 可视化展示剧本元素


## 项目阐述

我们打造了一款**AI 辅助的剧本创作平台**，支持 **单人创作** 与 **多人协作** 两种模式，采用三步式创作流程：

### ✏️ 单人创作模式

* 确定创作方向
* 搭建剧本框架
* 生成完整剧本内容

> 全程通过 AI 引导式对话完成，可逐步细化完善剧本细节

### 👥 多人协作模式

在三步式创作基础上，引入：

* 房间管理系统
* 实时协作机制
* 专业分工机制

平台还具备：

* 剧本内容分析
* 可视化元素生成

> 助力用户更直观理解故事结构，生动构建剧本世界


## 产品功能

### 1. 用户认证与管理

* 注册与登录（JWT 身份验证）
* 密码加密存储（哈希算法）


### 2. 创作模式选择

* **单人创作模式**：传统个人剧本创作流程
* **多人协作模式**：团队协作剧本创作流程


### 3. 房间管理功能（多人协作模式）

* 房间创建：设置名称、描述、密码
* 房间列表：支持搜索、浏览、刷新
* 成员管理：房主可审核成员加入


### 4. 三阶段协作创作流程

#### 第一阶段：方向选择与投票（多人协作）

* 方向主题选择（预设/自定义，最多3个）
* AI 整合：融合全员方向生成统一剧本方向
* 投票决策：选择 1\~2 个方向，统计投票结果

#### 第一阶段：AI 对话与 Slogan 生成（单人创作）

* 通过 AI 生成剧本方向与核心 Slogan


#### 第二阶段：专业分工与可视化创作（多人协作）

* **四类角色分工：**

  * 剧情设计师：负责主线与反转
  * 角色设计师：人物设定与关系
  * 线索架构师：线索与推理链
  * 氛围营造师：场景与情绪营造

* **可视化创作画布**

  * 拖拽式卡片操作（剧情/角色/线索/氛围）
  * 卡片关系可视化展示
  * 实时同步操作状态

* **智能辅助功能**

  * AI 场景生成
  * AI 冲突检测与修改建议
  * AI 整合画布生成剧本内容

* **协作辅助工具**

  * 任务卡片展示创作任务
  * 提示栏提供创作建议
  * 实时聊天系统（支持 `@AI` 调用）
  * 画布导出功能

#### 第二阶段：AI 完善框架（单人创作）

* AI 自动整合生成剧本结构
* AI 分析剧本内容提出改进建议


#### 第三阶段：协同编辑与完善（多人协作）

* 实时协同编辑（Yjs 实现）
* 编辑状态可视化（彩色光标+悬浮信息）
* 剧本保存与导出（Markdown 格式）

#### 第三阶段：剧本生成与可视化（单人创作）

* AI 整合生成完整剧本
* 剧本元素提取（人物/道具/场景）
* 元素图形化展示（基于文生图模型）


### 5. 剧本管理功能

* 查看剧本列表
* 剧本搜索（标题/关键词）
* 剧本排序（时间/标题，升降序）
* 剧本创建 / 删除 / 选择


### 6. 可视化元素管理

* 自动识别人物、道具、场景
* 分类展示剧本元素
* 支持元素详情查看
* 基于 AI 生成元素图片


## 技术方案

### 1. Pinia 状态管理技术

> Vue 3 官方状态库，支持 Composition API，响应式强、类型安全

**解决问题：**

* 复杂组件间状态共享
* 三阶段状态转换管理
* 异步操作统一控制
* 多人协作下状态同步


### 2. WebSocket 实时协作通信

**解决问题：**

* 多人实时通信与聊天
* 协作数据一致性
* 房间及成员管理机制


### 3. Yjs 实时协同编辑

**解决问题：**

* 实时同步文本内容
* 并发冲突解决机制
* 用户编辑状态可视化


### 4. 阶段式创作流程架构

**解决问题：**

* 剧本创作复杂流程拆解
* 阶段间连贯性与引导性
* 阶段数据状态分离与整合
* 协作流程有序控制


## 迭代计划

### ✅ 第一轮迭代（已完成）

* 用户注册登录
* 单人三阶段创作流程
* AI 辅助功能初步集成
* 剧本管理与可视化元素功能


### ✅ 第二轮迭代（已完成）

#### 功能新增：

* 房间系统：创建 / 搜索 / 管理 / 审核
* 三阶段协作流程完整构建：

  * 方向投票（阶段一）
  * 分工+画布（阶段二）
  * 实时协同编辑（阶段三）

#### 技术优化：

* WebSocket 实时通信
* Yjs 协同框架集成
* Pinia 状态管理增强
* AI 服务能力提升


### 🔄 第三轮迭代（进行中）

#### 系统稳定性：

* WebSocket 断线重连
* 协作冲突处理优化
* AI 响应性能优化
* 数据一致性保障

#### 用户体验：

* 流式输出支持
* UI 性能优化（动画 / 提示）
* 移动端适配优化
* 操作引导系统建设

#### 功能拓展：

* 剧本模板库
* 剧本版本管理
* 更丰富的可视化元素
* AI 场景应用扩展


### 🔭 第四轮迭代（远期规划）

#### 剧本杀社区：

* 用户剧本分享平台
* 点赞 / 评论 / 收藏 / 推荐
* 热门榜单与智能推荐
* 内容审核与版权保护

#### 智能化能力：

* 用户行为驱动的推荐优化
* 个性化创作建议系统
* 剧本质量 AI 评估
* 创作行为数据分析仪表盘


通过分阶段、重点明确的持续迭代开发，我们已构建出功能完善的多人协作剧本创作平台，并将持续提升用户体验，构建\*\*“创作 + 协作 + 分析 + 社交”一体化的剧本创作生态系统\*\*。

